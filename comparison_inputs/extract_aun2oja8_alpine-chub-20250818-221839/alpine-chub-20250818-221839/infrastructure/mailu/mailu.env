# Mailu Email Server Configuration for ClinicHub
# This configuration is optimized for medical practice use with HIPAA considerations

###################################
# Common configuration variables
###################################

# Set to a randomly generated 16 bytes string
SECRET_KEY=ClinicHub2025EmailSecretKey16Bytes

# Subnet of the docker network. This should not conflict with any networks to which your system is connected.
SUBNET=172.20.0.0/16

# Main mail domain
DOMAIN=clinic.local

# Hostnames for this server, separated with comas
HOSTNAMES=mail.clinic.local,webmail.clinic.local,admin.clinic.local

# Postmaster local part (will append the main mail domain)
POSTMASTER=admin

# Choose how secure connections will behave (value: letsencrypt, cert, notls, mail, mail-letsencrypt)
# For Synology NAS deployment, typically use 'cert' with your own certificates
TLS_FLAVOR=mail

# Authentication rate limiting per IP (per /24 on ipv4 and /56 on ipv6)
AUTH_RATELIMIT_IP=60/hour

# Authentication rate limiting per user (regardless of the source-IP)
AUTH_RATELIMIT_USER=100/day

# Opt-out of statistics, replace with "True" to opt out
DISABLE_STATISTICS=True

###################################
# Optional features
###################################

# Expose the admin interface (value: true, false)
ADMIN=true

# Choose which webmail to run if any (values: roundcube, rainloop, none)
WEBMAIL=roundcube

# Dav server implementation (value: radicale, none)
WEBDAV=none

# Antivirus solution (value: clamav, none)
ANTIVIRUS=clamav

###################################
# Mail settings
###################################

# Message size limit in bytes
# Default is 50MB for medical attachments (X-rays, reports, etc.)
MESSAGE_SIZE_LIMIT=52428800

# Message retention time in days
MESSAGE_RETENTION_TIME=2555  # 7 years for medical records compliance

# Will relay all outgoing mails if configured
RELAYHOST=

# Fetchmail delay
FETCHMAIL_DELAY=600

# Recipient delimiter, character used to delimiter localpart from custom address part
RECIPIENT_DELIMITER=+

# DMARC rua and ruf email
DMARC_RUA=admin@clinic.local
DMARC_RUF=admin@clinic.local

# Welcome email, enable and set a topic and body if you wish to send welcome
# emails to all users.
WELCOME=false
WELCOME_SUBJECT=Welcome to ClinicHub Email
WELCOME_BODY=Welcome to your secure medical practice email system.

# Maildir compression
# choose compression-method, default: none (value: bz2, gz)
COMPRESSION=
# change compression-level, default: 6 (value: 1-9)
COMPRESSION_LEVEL=

# IMAP full-text search is enabled by default. Set the following variable to off in order to disable the feature.
# FULL_TEXT_SEARCH=off

###################################
# Web settings
###################################

# Path to redirect / to
WEBROOT_REDIRECT=/admin

# Path to the admin interface if enabled
ADMIN_PATH=/admin

# Path to the webmail if enabled
WEBMAIL_PATH=/webmail

# Website name
SITENAME=ClinicHub Email

# Linked Website URL
WEBSITE=https://clinic.local

###################################
# Advanced settings
###################################

# Log driver for front service. Possible values:
# json-file (default)
# journald (On systemd platforms, useful for Fail2Ban integration)
# syslog (Non systemd platforms, Fail2Ban integration. Disables `docker-compose log` for front!)
# LOG_DRIVER=json-file

# Docker-compose project name, this will prepended to containers names.
COMPOSE_PROJECT_NAME=clinichub

# Number of rounds used by the password hashing scheme
CREDENTIAL_ROUNDS=12

# Header to take the real ip from
REAL_IP_HEADER=X-Forwarded-For

# IPs for which the previous header will be trusted
REAL_IP_FROM=172.20.0.0/16

# choose wether mailu bounces (no) or rejects (yes) mail when recipient is unknown (value: yes, no)
REJECT_UNLISTED_RECIPIENT=yes

# Log level threshold in start.py (value: CRITICAL, ERROR, WARNING, INFO, DEBUG, NOTSET)
LOG_LEVEL=INFO

# Timezone for the Mailu server
TZ=America/New_York

###################################
# Database settings
###################################

# Database settings
# Only SQLite is supported for this simple deployment
# For production with Synology NAS, SQLite is sufficient for small-medium practices

###################################
# LDAP Authentication (Optional - for Synology Integration)
###################################

# Enable LDAP authentication
LDAP_ENABLED=false

# LDAP server hostname or IP
# LDAP_SERVER_HOST=synology.local

# LDAP server port
# LDAP_SERVER_PORT=389

# LDAP bind DN for authentication
# LDAP_BIND_DN=cn=admin,dc=clinic,dc=local

# LDAP bind password
# LDAP_BIND_PW=password

# LDAP user search base
# LDAP_USER_BASE=ou=users,dc=clinic,dc=local

# LDAP user filter
# LDAP_USER_FILTER=(&(objectClass=inetOrgPerson)(uid=%s))

###################################
# Security and Compliance
###################################

# Enable two-factor authentication
ENABLE_2FA=true

# Password policy enforcement
PASSWORD_SCHEME=PBKDF2

# Session timeout (in seconds) - 8 hours for medical practice
SESSION_TIMEOUT=28800

# Automatic logout after inactivity (in minutes)
SESSION_LIFETIME=480

# Enable audit logging for compliance
AUDIT_LOG=true

# Encryption at rest (if supported by storage)
ENCRYPT_AT_REST=true

###################################
# Medical Practice Specific Settings
###################################

# Default domain for new users
DEFAULT_DOMAIN=clinic.local

# Auto-create mailboxes for new users
AUTO_CREATE_USERS=false

# Require approval for new users (HIPAA compliance)
REQUIRE_USER_APPROVAL=true

# Default quota per user (500MB)
DEFAULT_QUOTA=524288000

# Enable message encryption by default
DEFAULT_ENCRYPTION=true