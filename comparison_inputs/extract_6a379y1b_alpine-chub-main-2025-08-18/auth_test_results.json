{
  "total_tests": 11,
  "passed_tests": 9,
  "success_rate": 81.81818181818183,
  "all_passed": false,
  "test_results": [
    {
      "test": "Backend Connectivity",
      "success": true,
      "message": "Backend accessible at http://localhost:8001",
      "details": {
        "status_code": 200,
        "response": {
          "message": "ClinicHub API is running",
          "status": "healthy",
          "version": "1.0.0",
          "docs": "/docs",
          "api_endpoints": "/api"
        }
      },
      "timestamp": "2025-08-18T07:55:55.576448"
    },
    {
      "test": "Health Endpoint",
      "success": true,
      "message": "Health endpoint responding correctly",
      "details": {
        "response": {
          "status": "healthy",
          "timestamp": "2025-08-18T07:55:55.578453"
        }
      },
      "timestamp": "2025-08-18T07:55:55.619546"
    },
    {
      "test": "Admin User Initialization",
      "success": false,
      "message": "Admin initialization failed with status 400",
      "details": {
        "status_code": 400,
        "response": "{\"detail\":\"Admin user already exists\"}"
      },
      "timestamp": "2025-08-18T07:55:55.663551"
    },
    {
      "test": "Admin Login",
      "success": true,
      "message": "Admin login successful with valid JWT token",
      "details": {
        "token_received": true,
        "token_length": 124,
        "user_info": {
          "token_type": "bearer",
          "expires_in": 28800,
          "user": {
            "id": "18a83d1c-2634-4aba-9240-c82b99e0e885",
            "username": "admin",
            "email": "admin@clinichub.com",
            "first_name": "System",
            "last_name": "Administrator",
            "role": "admin",
            "permissions": [
              "patients:read",
              "patients:write",
              "patients:delete",
              "ehr:read",
              "ehr:write",
              "ehr:delete",
              "forms:read",
              "forms:write",
              "forms:delete",
              "inventory:read",
              "inventory:write",
              "inventory:delete",
              "invoices:read",
              "invoices:write",
              "invoices:delete",
              "employees:read",
              "employees:write",
              "employees:delete",
              "finance:read",
              "finance:write",
              "finance:delete",
              "users:read",
              "users:write",
              "users:delete",
              "reports:read",
              "settings:read",
              "settings:write"
            ],
            "auth_source": "local",
            "synology_enabled": false,
            "profile_picture": null
          }
        }
      },
      "timestamp": "2025-08-18T07:55:56.011586"
    },
    {
      "test": "JWT Token Validation",
      "success": true,
      "message": "JWT token validation successful",
      "details": {
        "user_data": {
          "id": "18a83d1c-2634-4aba-9240-c82b99e0e885",
          "username": "admin",
          "email": "admin@clinichub.com",
          "first_name": "System",
          "last_name": "Administrator",
          "role": "admin",
          "status": "active",
          "password_hash": "$2b$12$U36gOVCAQYik2MC6nujkAuj.fW.g9/c4VXuc2xYbXfddIRW.VUpXm",
          "last_login": "2025-08-18T07:55:55.967740",
          "failed_login_attempts": 0,
          "locked_until": null,
          "profile_picture": null,
          "phone": null,
          "employee_id": null,
          "permissions": [
            "patients:read",
            "patients:write",
            "patients:delete",
            "ehr:read",
            "ehr:write",
            "ehr:delete",
            "forms:read",
            "forms:write",
            "forms:delete",
            "inventory:read",
            "inventory:write",
            "inventory:delete",
            "invoices:read",
            "invoices:write",
            "invoices:delete",
            "employees:read",
            "employees:write",
            "employees:delete",
            "finance:read",
            "finance:write",
            "finance:delete",
            "users:read",
            "users:write",
            "users:delete",
            "reports:read",
            "settings:read",
            "settings:write"
          ],
          "auth_source": "local",
          "synology_sid": null,
          "synology_last_verified": null,
          "created_at": "2025-08-18T06:52:45.006274",
          "updated_at": "2025-08-18T06:52:45.006276",
          "created_by": null
        }
      },
      "timestamp": "2025-08-18T07:55:56.066593"
    },
    {
      "test": "Protected Endpoint Access",
      "success": true,
      "message": "Protected endpoints accessible (5/5)",
      "details": {
        "successful": [
          "/patients",
          "/employees",
          "/inventory",
          "/invoices",
          "/financial-transactions"
        ],
        "failed": []
      },
      "timestamp": "2025-08-18T07:55:56.254551"
    },
    {
      "test": "Unauthorized Access Prevention",
      "success": true,
      "message": "Properly rejected unauthorized access (status 403)",
      "details": {
        "status_code": 403
      },
      "timestamp": "2025-08-18T07:55:56.296559"
    },
    {
      "test": "Invalid Credentials Rejection",
      "success": true,
      "message": "Properly rejected invalid credentials (status 401)",
      "details": {
        "status_code": 401
      },
      "timestamp": "2025-08-18T07:55:56.714559"
    },
    {
      "test": "Database Connectivity",
      "success": true,
      "message": "Database accessible through API",
      "details": {
        "patient_count": 63
      },
      "timestamp": "2025-08-18T07:55:56.767075"
    },
    {
      "test": "CORS Configuration",
      "success": true,
      "message": "CORS properly configured for frontend access",
      "details": {
        "cors_headers": {
          "Access-Control-Allow-Origin": "http://localhost:3000",
          "Access-Control-Allow-Methods": "DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT",
          "Access-Control-Allow-Headers": "Content-Type,Authorization"
        }
      },
      "timestamp": "2025-08-18T07:55:56.809530"
    },
    {
      "test": "Session Management",
      "success": false,
      "message": "Logout successful but token still valid",
      "details": {
        "logout_status": 200,
        "token_still_valid": true
      },
      "timestamp": "2025-08-18T07:55:56.897587"
    }
  ]
}